[tox]
skipsdist = True
envlist = {py27,py34}-{nosetest,pep8}, cover

[testenv]
pip_pre =
    cover: True
basepython =
    cover,py27: python2.7
    py34: python3.4
deps =
    google-api-python-client
    pep8: flake8
    pep8: flake8-import-order
    nosetest,cover: nose
    nosetest,cover: mock
    cover: coverage
    cover: coveralls
commands =
    nosetest: nosetests
    pep8: flake8 --exclude lib,bin --max-complexity=10
    cover: coverage erase
    cover: coverage run -p --debug --branch --concurrency=multiprocessing \
    cover: --source=pubsub_logging {envbindir}/nosetests
    cover: coverage combine
    cover: coverage report --fail-under=100 -m
    cover: coveralls
